# Database Configuration
# Choose database type: 'postgres' or 'mongodb'
DB_TYPE=postgres

# API Configuration
# Choose API type: 'rest', 'graphql', or 'both'
# - 'rest': Only REST API endpoints (/api/todos)
# - 'graphql': Only GraphQL endpoint (/graphql)
# - 'both': Both REST and GraphQL (default)
API_TYPE=both

# PostgreSQL Configuration (when DB_TYPE=postgres)
DATABASE_URL="postgresql://todouser:todopassword@localhost:5432/tododb?schema=public"

# MongoDB Configuration (when DB_TYPE=mongodb)
MONGODB_URL="mongodb://todouser:todopassword@localhost:27017/tododb?authSource=admin"

# Server
PORT=4000
NODE_ENV=development

# Logging
# Log level: 'error', 'warn', 'info', 'http', 'debug'
LOG_LEVEL=info

# CORS (Frontend URL)
CORS_ORIGIN="http://localhost:5173"

# Authentication (JWT Configuration)
# IMPORTANT: Generate secure secrets for production!
# Command: openssl rand -base64 32
# Secrets must be at least 32 characters long
JWT_ACCESS_SECRET="your-access-secret-min-32-chars-change-in-production"
JWT_REFRESH_SECRET="your-refresh-secret-min-32-chars-change-in-production"

# Token expiry times
# Access tokens expire in 15 minutes (short-lived for security)
# Refresh tokens expire in 7 days (stored in httpOnly cookies)
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# Password Hashing
# Bcrypt rounds: 10-12 for development, 12-14 for production
# Higher = more secure but slower
BCRYPT_ROUNDS=12

# Rate Limiting Configuration
# API Rate Limit: 500 requests per 15 minutes (increased for session polling)
# Auth Rate Limit: 5 requests per 15 minutes (login/signup attempts)
# GraphQL Rate Limit: 50 requests per 15 minutes
# Mutation Rate Limit: 20 requests per 15 minutes
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS=500  # Max requests per window (general API)

# Session Management
# Session timeout in minutes (inactive session expiration)
# After this time of inactivity, users will be auto-logged out
# Warning shown at 1 minute remaining
SESSION_TIMEOUT_MINUTES=5

# Session lifetime in hours (default 7 days = 168 hours)
# Maximum time a session can exist before requiring re-authentication
SESSION_LIFETIME_HOURS=168

# Maximum number of concurrent sessions per user across devices
MAX_SESSIONS_PER_USER=5

# WebSocket Configuration
# Frontend URL for WebSocket CORS
CLIENT_URL=http://localhost:5173

# Cron Jobs
# Session cleanup schedule (cron format: */15 * * * * = every 15 minutes)
SESSION_CLEANUP_SCHEDULE="*/15 * * * *"

# Inactive session threshold in hours (sessions inactive for this long will be cleaned)
INACTIVE_SESSION_THRESHOLD_HOURS=24

# Optional: Sentry Error Tracking
# Get your DSN from https://sentry.io
# Leave empty to disable error tracking
SENTRY_DSN=

# Reverse Proxy Configuration
# Set when running behind a reverse proxy (Caddy, Nginx, etc.)
# This enables Express to trust X-Forwarded-* headers
TRUSTED_PROXY=caddy

# Instance Identification
# Used for load balancing and monitoring
# Each backend instance should have a unique ID
INSTANCE_ID=backend-1
